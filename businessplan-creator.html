<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="businessplan_creator.title">Businessplan Ersteller - KI Konzept Builder</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23646cff'><circle cx='12' cy='12' r='12'/></svg>">
    
    <!-- CSS -->
    <link rel="stylesheet" href="notion-design-system.css">
    <link rel="stylesheet" href="loading-states.css">
    <link rel="stylesheet" href="businessplan-styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <a href="dashboard.html" class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    <span class="logo-text" data-i18n="businessplan_creator.logo_text">Businessplan Ersteller</span>
                </a>
            </div>
            
            <div class="nav-right">
                <div class="progress-indicator">
                    <span class="progress-text" data-i18n="businessplan_creator.progress_text">Fortschritt</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-percent" id="progressPercent">0%</span>
                </div>
                
                <div class="nav-actions">
                    <button class="btn btn-ghost" onclick="goToDashboard()">
                        <span data-i18n="common.dashboard">Dashboard</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Selection Step -->
        <section id="selectionStep" class="step active">
            <div class="container">
                <div class="text-center mb-5">
                    <h1 class="page-title" data-i18n="businessplan_creator.page_title">Businessplan erstellen</h1>
                    <p class="page-subtitle" data-i18n="businessplan_creator.page_subtitle">W√§hle wie du deinen professionellen Businessplan erstellen m√∂chtest ‚Äì mit unseren branchenspezifischen Vorlagen oder durch Upload deines bestehenden Plans</p>
                </div>

                <div class="selection-cards">
                    <!-- Template Option -->
                    <div class="selection-card" onclick="selectOption('template')">
                        <div class="card-icon">üìù</div>
                        <h3 data-i18n="businessplan_creator.template_option.title">Vorlage ausf√ºllen</h3>
                        <p data-i18n="businessplan_creator.template_option.description">Nutze unsere vorgefertigten Businessplan-Vorlagen und f√ºlle sie Schritt f√ºr Schritt aus</p>
                        
                        <div class="benefits">
                            <span class="benefit" data-i18n="businessplan_creator.template_option.benefits.structured_guide">Strukturierte Anleitung</span>
                            <span class="benefit" data-i18n="businessplan_creator.template_option.benefits.industry_templates">Branchenspezifische Vorlagen</span>
                            <span class="benefit" data-i18n="businessplan_creator.template_option.benefits.auto_formatting">Automatische Formatierung</span>
                        </div>
                        
                        <button class="btn btn-primary" data-i18n="businessplan_creator.template_option.button">Vorlage w√§hlen</button>
                    </div>

                    <!-- Upload Option -->
                    <div class="selection-card" onclick="selectOption('upload')">
                        <div class="card-icon">üì§</div>
                        <h3 data-i18n="businessplan_creator.upload_option.title">Businessplan hochladen</h3>
                        <p data-i18n="businessplan_creator.upload_option.description">Lade deinen bestehenden Businessplan hoch und erhalte professionelles Feedback</p>
                        
                        <div class="benefits">
                            <span class="benefit" data-i18n="businessplan_creator.upload_option.benefits.drag_drop">Drag & Drop Upload</span>
                            <span class="benefit" data-i18n="businessplan_creator.upload_option.benefits.auto_analysis">Automatische Analyse</span>
                            <span class="benefit" data-i18n="businessplan_creator.upload_option.benefits.improvement_suggestions">Verbesserungsvorschl√§ge</span>
                        </div>
                        
                        <button class="btn btn-secondary" data-i18n="businessplan_creator.upload_option.button">Datei hochladen</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Template Selection Step -->
        <section id="templateStep" class="step">
            <div class="container">
                <div class="step-header">
                    <button class="btn btn-ghost" onclick="goBackToSelection()">
                        <span>‚Üê </span><span data-i18n="businessplan_creator.template_selection.back_button">Zur√ºck zur Auswahl</span>
                    </button>
                    <h2 data-i18n="businessplan_creator.template_selection.title">Businessplan-Vorlage ausw√§hlen</h2>
                    <p data-i18n="businessplan_creator.template_selection.description">W√§hle eine Vorlage, die zu deiner Branche und Gr√ºndungsart passt</p>
                </div>

                <div class="template-grid">
                    <!-- Startup Template -->
                    <div class="template-card" data-template="startup">
                        <div class="template-header">
                            <h3 data-i18n="businessplan_creator.templates.startup.title">üöÄ Startup / Tech</h3>
                            <span class="template-badge popular" data-i18n="businessplan_creator.templates.startup.badge">Beliebt</span>
                        </div>
                        <p data-i18n="businessplan_creator.templates.startup.description">F√ºr innovative Startups und Technologieunternehmen</p>
                        
                        <div class="template-features">
                            <span data-i18n="businessplan_creator.templates.startup.features.mvp">MVP-Entwicklung</span>
                            <span data-i18n="businessplan_creator.templates.startup.features.scalability">Skalierbarkeit</span>
                            <span data-i18n="businessplan_creator.templates.startup.features.investor_pitch">Investor Pitch</span>
                        </div>
                        
                        <div class="template-meta">
                            <span>‚è±Ô∏è 2-3h</span>
                            <span>üìÑ 8 Kapitel</span>
                        </div>
                        
                        <button class="btn btn-primary" onclick="selectTemplate('startup')" data-i18n="businessplan_creator.templates.startup.button">Vorlage verwenden</button>
                    </div>

                    <!-- Traditional Template -->
                    <div class="template-card" data-template="traditional">
                        <div class="template-header">
                            <h3 data-i18n="businessplan_creator.templates.traditional.title">üè¢ Klassisches Unternehmen</h3>
                        </div>
                        <p data-i18n="businessplan_creator.templates.traditional.description">F√ºr traditionelle Gesch√§ftsmodelle und etablierte Branchen</p>
                        
                        <div class="template-features">
                            <span data-i18n="businessplan_creator.templates.traditional.features.structure">Bew√§hrte Struktur</span>
                            <span data-i18n="businessplan_creator.templates.traditional.features.bank_financing">Bankfinanzierung</span>
                            <span data-i18n="businessplan_creator.templates.traditional.features.local_market">Lokaler Markt</span>
                        </div>
                        
                        <div class="template-meta">
                            <span>‚è±Ô∏è 3-4h</span>
                            <span>üìÑ 10 Kapitel</span>
                        </div>
                        
                        <button class="btn btn-primary" onclick="selectTemplate('traditional')" data-i18n="businessplan_creator.templates.traditional.button">Vorlage verwenden</button>
                    </div>

                    <!-- E-Commerce Template -->
                    <div class="template-card" data-template="ecommerce">
                        <div class="template-header">
                            <h3 data-i18n="businessplan_creator.templates.ecommerce.title">üõí E-Commerce</h3>
                        </div>
                        <p data-i18n="businessplan_creator.templates.ecommerce.description">F√ºr Online-Shops und E-Commerce-Plattformen</p>
                        
                        <div class="template-features">
                            <span data-i18n="businessplan_creator.templates.ecommerce.features.online_marketing">Online-Marketing</span>
                            <span data-i18n="businessplan_creator.templates.ecommerce.features.logistics">Logistik</span>
                            <span data-i18n="businessplan_creator.templates.ecommerce.features.conversion">Conversion</span>
                        </div>
                        
                        <div class="template-meta">
                            <span>‚è±Ô∏è 2-3h</span>
                            <span>üìÑ 9 Kapitel</span>
                        </div>
                        
                        <button class="btn btn-primary" onclick="selectTemplate('ecommerce')" data-i18n="businessplan_creator.templates.ecommerce.button">Vorlage verwenden</button>
                    </div>

                    <!-- Service Template -->
                    <div class="template-card" data-template="service">
                        <div class="template-header">
                            <h3 data-i18n="businessplan_creator.templates.service.title">üíº Dienstleistung</h3>
                        </div>
                        <p data-i18n="businessplan_creator.templates.service.description">F√ºr Beratungen, Agenturen und Serviceunternehmen</p>
                        
                        <div class="template-features">
                            <span data-i18n="businessplan_creator.templates.service.features.expertise">Expertise</span>
                            <span data-i18n="businessplan_creator.templates.service.features.customer_base">Kundenstamm</span>
                            <span data-i18n="businessplan_creator.templates.service.features.processes">Prozesse</span>
                        </div>
                        
                        <div class="template-meta">
                            <span>‚è±Ô∏è 2h</span>
                            <span>üìÑ 7 Kapitel</span>
                        </div>
                        
                        <button class="btn btn-primary" onclick="selectTemplate('service')" data-i18n="businessplan_creator.templates.service.button">Vorlage verwenden</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upload Step -->
        <section id="uploadStep" class="step">
            <div class="container">
                <div class="step-header">
                    <button class="btn btn-ghost" onclick="goBackToSelection()">
                        <span>‚Üê </span><span data-i18n="businessplan_creator.template_selection.back_button">Zur√ºck zur Auswahl</span>
                    </button>
                    <h2 data-i18n="businessplan_creator.upload_section.title">Businessplan hochladen</h2>
                    <p data-i18n="businessplan_creator.upload_section.description">Lade deinen bestehenden Businessplan hoch f√ºr professionelles Feedback</p>
                </div>

                <div class="upload-section">
                    <div class="upload-area" onclick="triggerFileUpload()">
                        <div class="upload-icon">üìÅ</div>
                        <h3 data-i18n="businessplan_creator.upload_section.drop_zone">Datei hier ablegen oder klicken</h3>
                        <p data-i18n="businessplan_creator.upload_section.formats">Unterst√ºtzte Formate: PDF, DOC, DOCX, TXT</p>
                        <p class="file-size" data-i18n="businessplan_creator.upload_section.file_size">Max. Dateigr√∂√üe: 10 MB</p>
                    </div>
                    
                    <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.txt" style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                        <span data-i18n="businessplan_creator.upload_option.button">Datei hochladen</span>
                    </button>
                </div>

                <div class="file-list" id="fileList">
                    <h3 data-i18n="businessplan_creator.upload_section.uploaded_files">Hochgeladene Dateien</h3>
                    <!-- Files will be added here dynamically -->
                </div>
            </div>
        </section>

        <!-- Editor Step -->
        <section id="editorStep" class="step">
            <div class="editor-container">
                <div class="editor-sidebar">
                    <div class="sidebar-header">
                        <h3 data-i18n="businessplan_creator.structure.title">Businessplan Struktur</h3>
                        <div class="completion-indicator">
                            <span id="completionText">0/8</span>
                            <div class="completion-ring">
                                <svg width="40" height="40">
                                    <circle cx="20" cy="20" r="16" stroke="#e5e7eb" stroke-width="3" fill="none"/>
                                    <circle id="completionCircle" cx="20" cy="20" r="16" stroke="#10b981" stroke-width="3" 
                                            fill="none" stroke-dasharray="100" stroke-dashoffset="100"/>
                                </svg>
                                <span id="completionPercent">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chapter-list" id="chapterList">
                        <!-- Chapters will be loaded here -->
                    </div>
                    
                    <div class="sidebar-actions">
                        <button class="btn btn-outline" onclick="previewBusinessplan()">
                            <span data-i18n="common.preview">Vorschau</span>
                        </button>
                        <button class="btn btn-primary" onclick="sendToAdvisor()">
                            <span data-i18n="common.send_to_advisor">An Berater senden</span>
                        </button>
                    </div>
                </div>
                
                <div class="editor-main">
                    <div class="editor-header">
                        <h2 id="currentChapterTitle" data-i18n="businessplan_creator.chapter.loading">Kapitel laden...</h2>
                        <div class="editor-controls">
                            <button class="btn btn-ghost" onclick="autoComplete()">
                                <span data-i18n="common.auto_complete">KI-Vervollst√§ndigung</span>
                            </button>
                            <button class="btn btn-ghost" onclick="saveProgress()">
                                <span data-i18n="common.save">Speichern</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="editor-content">
                        <div id="textEditor">
                            <!-- Rich text editor will be initialized here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Send to Advisor Modal -->
    <div id="advisorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="businessplan_creator.advisor.title">Businessplan an Berater senden</h2>
                <button class="modal-close" onclick="closeAdvisorModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="advisor-summary">
                    <h3 data-i18n="businessplan_creator.advisor.summary">Zusammenfassung</h3>
                    <div class="summary-stats">
                        <div class="stat">
                            <span class="stat-label" data-i18n="businessplan_creator.advisor.completeness">Vollst√§ndigkeit:</span>
                            <span class="stat-value" id="completenessValue">75%</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label" data-i18n="businessplan_creator.advisor.template">Vorlage:</span>
                            <span class="stat-value" id="templateValue">Startup</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label" data-i18n="businessplan_creator.advisor.word_count">W√∂rter:</span>
                            <span class="stat-value" id="wordCountValue">2.350</span>
                        </div>
                    </div>
                </div>

                <div class="advisor-message">
                    <h3 data-i18n="businessplan_creator.advisor.message_title">Nachricht an den Berater (optional)</h3>
                    <textarea 
                        id="advisorMessage" 
                        class="form-textarea"
                        data-i18n-placeholder="businessplan_creator.advisor.message_placeholder"
                        placeholder="Beschreibe spezielle Fragen oder Bereiche, auf die der Berater achten soll..."
                        rows="4"
                    ></textarea>
                </div>

                <div class="feedback-options">
                    <h3 data-i18n="businessplan_creator.advisor.feedback_options">Feedback-Optionen</h3>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" checked>
                            <span data-i18n="businessplan_creator.advisor.general_review">Allgemeine Bewertung</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" checked>
                            <span data-i18n="businessplan_creator.advisor.financial_check">Finanzplan-Pr√ºfung</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox">
                            <span data-i18n="businessplan_creator.advisor.market_analysis">Marktanalyse-Feedback</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox">
                            <span data-i18n="businessplan_creator.advisor.competition_analysis">Wettbewerbsanalyse</span>
                        </label>
                    </div>
                </div>

                <div class="next-steps">
                    <h4 data-i18n="businessplan_creator.advisor.next_steps">Was passiert als n√§chstes?</h4>
                    <ul>
                        <li data-i18n="businessplan_creator.advisor.steps.forward">Dein Businessplan wird an einen Fachberater weitergeleitet</li>
                        <li data-i18n="businessplan_creator.advisor.steps.feedback">Du erh√§ltst innerhalb von 3-5 Werktagen detailliertes Feedback</li>
                        <li data-i18n="businessplan_creator.advisor.steps.dashboard">Das Feedback wird in deinem Dashboard angezeigt</li>
                        <li data-i18n="businessplan_creator.advisor.steps.consultation">Bei Bedarf kann ein Beratungstermin vereinbart werden</li>
                    </ul>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAdvisorModal()" data-i18n="businessplan_creator.advisor.buttons.cancel">Abbrechen</button>
                <button class="btn btn-primary" onclick="confirmSendToAdvisor()" data-i18n="businessplan_creator.advisor.buttons.send">Businessplan senden</button>
            </div>
        </div>
    </div>

    <!-- Template Preview Modal -->
    <div id="previewModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 id="previewTemplateTitle" data-i18n="businessplan_creator.preview.title">Template Vorschau</h2>
                <button class="modal-close" onclick="closePreviewModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="preview-header">
                    <h3 id="previewTemplateName" data-i18n="businessplan_creator.templates.startup.title">Startup / Tech</h3>
                    <p id="previewTemplateDescription" data-i18n="businessplan_creator.templates.startup.description">F√ºr innovative Startups und Technologieunternehmen</p>
                    
                    <div class="preview-meta">
                        <div class="meta-item">
                            <span class="meta-icon">üìÑ</span>
                            <span id="previewChapterCount" data-i18n="businessplan_creator.preview.chapters" data-i18n-options='{"count": 8}'>8 Kapitel</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-icon">‚è±Ô∏è</span>
                            <span id="previewEstimatedTime" data-i18n="businessplan_creator.preview.estimated_time" data-i18n-options='{"time": "2-3"}'>2-3 Stunden</span>
                        </div>
                    </div>
                </div>
                
                <div class="preview-content" id="previewContent">
                    <!-- Template structure will be shown here -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePreviewModal()">
                    <span data-i18n="common.close">Schlie√üen</span>
                </button>
                <button class="btn btn-primary" onclick="useTemplate()" data-i18n="businessplan_creator.preview.use_template">Diese Vorlage verwenden</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="i18n/i18n-complete.js"></script>
    <script src="js/businessplan-creator.js"></script>
    <script>
        // Initialize i18n when page loads
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof i18nManager !== 'undefined') {
                i18nManager.initialize();
            }
        });
    </script>
</body>
</html>