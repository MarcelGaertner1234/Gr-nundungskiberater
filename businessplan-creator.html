<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Businessplan Ersteller - KI Konzept Builder</title>
    <link rel="stylesheet" href="notion-design-system.css">
    <link rel="stylesheet" href="businessplan-styles.css">
    <link rel="stylesheet" href="text-visibility-fix.css">
    <link rel="stylesheet" href="loading-states.css">
    <link rel="stylesheet" href="mobile-navigation-styles.css">
    <link rel="stylesheet" href="error-handling-styles.css">
    <link rel="stylesheet" href="tooltips-styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="header-logo">
                    <a href="dashboard.html" class="logo">
                        <div class="logo-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
                            </svg>
                        </div>
                        <span class="logo-text">Businessplan Ersteller</span>
                    </a>
                </div>
                
                <div class="header-actions">
                    <div class="businessplan-progress">
                        <span class="progress-text">Fortschritt</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="businessplanProgress"></div>
                        </div>
                        <span class="progress-percentage" id="progressPercentage">0%</span>
                    </div>
                    
                    <button class="theme-toggle" onclick="toggleTheme()">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                    
                    <button class="btn btn-primary" onclick="sendToAdvisor()" id="sendToAdvisorBtn" disabled>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                        An Berater senden
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="businessplan-main">
        <div class="container">
            <!-- Mode Selection -->
            <div class="mode-selection" id="modeSelection">
                <div class="hero-section">
                    <div class="hero-badge">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                        </svg>
                        KI-gest√ºtzte Businessplan-Erstellung
                    </div>
                    <h1 class="page-title">Businessplan erstellen</h1>
                    <p class="page-subtitle">W√§hle wie du deinen professionellen Businessplan erstellen m√∂chtest ‚Äì mit unseren branchenspezifischen Vorlagen oder durch Upload deines bestehenden Plans</p>
                </div>
                
                <div class="mode-cards">
                    <div class="mode-card" onclick="selectMode('template')">
                        <div class="mode-icon">üìù</div>
                        <h3>Vorlage ausf√ºllen</h3>
                        <p>Nutze unsere vorgefertigten Businessplan-Vorlagen und f√ºlle sie Schritt f√ºr Schritt aus</p>
                        <div class="mode-benefits">
                            <span class="benefit">Strukturierte Anleitung</span>
                            <span class="benefit">Branchenspezifische Vorlagen</span>
                            <span class="benefit">Automatische Formatierung</span>
                        </div>
                        <button class="btn btn-primary">Vorlage w√§hlen</button>
                    </div>
                    
                    <div class="mode-card" onclick="selectMode('upload')">
                        <div class="mode-icon">üìÅ</div>
                        <h3>Businessplan hochladen</h3>
                        <p>Lade deinen bestehenden Businessplan hoch und erhalte professionelles Feedback</p>
                        <div class="mode-benefits">
                            <span class="benefit">Drag & Drop Upload</span>
                            <span class="benefit">Automatische Analyse</span>
                            <span class="benefit">Verbesserungsvorschl√§ge</span>
                        </div>
                        <button class="btn btn-secondary">Datei hochladen</button>
                    </div>
                </div>
            </div>

            <!-- Template Selection -->
            <div class="template-selection" id="templateSelection" style="display: none;">
                <div class="section-header">
                    <h2>Businessplan-Vorlage ausw√§hlen</h2>
                    <p>W√§hle eine Vorlage, die zu deiner Branche und Gr√ºndungsart passt</p>
                    <button class="back-button" onclick="backToModeSelection()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5"></path>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        Zur√ºck zur Auswahl
                    </button>
                </div>
                
                <div class="template-grid">
                    <div class="template-card" data-template="startup">
                        <div class="template-header">
                            <h3>üöÄ Startup / Tech</h3>
                            <span class="template-badge popular">Beliebt</span>
                        </div>
                        <p>F√ºr innovative Startups und Technologieunternehmen</p>
                        <div class="template-features">
                            <span>MVP-Entwicklung</span>
                            <span>Skalierbarkeit</span>
                            <span>Investor Pitch</span>
                        </div>
                        <div class="template-actions">
                            <button class="btn btn-secondary" onclick="previewTemplate('startup')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                                Vorschau
                            </button>
                            <button class="btn btn-primary" onclick="selectTemplate('startup')">Vorlage verwenden</button>
                        </div>
                    </div>
                    
                    <div class="template-card" data-template="traditional">
                        <div class="template-header">
                            <h3>üè¢ Klassisches Unternehmen</h3>
                        </div>
                        <p>F√ºr traditionelle Gesch√§ftsmodelle und etablierte Branchen</p>
                        <div class="template-features">
                            <span>Bew√§hrte Struktur</span>
                            <span>Bankfinanzierung</span>
                            <span>Lokaler Markt</span>
                        </div>
                        <div class="template-actions">
                            <button class="btn btn-secondary" onclick="previewTemplate('traditional')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                                Vorschau
                            </button>
                            <button class="btn btn-primary" onclick="selectTemplate('traditional')">Vorlage verwenden</button>
                        </div>
                    </div>
                    
                    <div class="template-card" data-template="ecommerce">
                        <div class="template-header">
                            <h3>üõí E-Commerce</h3>
                        </div>
                        <p>F√ºr Online-Shops und E-Commerce-Plattformen</p>
                        <div class="template-features">
                            <span>Online-Marketing</span>
                            <span>Logistik</span>
                            <span>Conversion</span>
                        </div>
                        <div class="template-actions">
                            <button class="btn btn-secondary" onclick="previewTemplate('ecommerce')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                                Vorschau
                            </button>
                            <button class="btn btn-primary" onclick="selectTemplate('ecommerce')">Vorlage verwenden</button>
                        </div>
                    </div>
                    
                    <div class="template-card" data-template="service">
                        <div class="template-header">
                            <h3>üíº Dienstleistung</h3>
                        </div>
                        <p>F√ºr Beratungen, Agenturen und Serviceunternehmen</p>
                        <div class="template-features">
                            <span>Expertise</span>
                            <span>Kundenstamm</span>
                            <span>Prozesse</span>
                        </div>
                        <div class="template-actions">
                            <button class="btn btn-secondary" onclick="previewTemplate('service')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                                Vorschau
                            </button>
                            <button class="btn btn-primary" onclick="selectTemplate('service')">Vorlage verwenden</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="upload-section" id="uploadSection" style="display: none;">
                <div class="section-header">
                    <h2>Businessplan hochladen</h2>
                    <p>Lade deinen bestehenden Businessplan hoch f√ºr professionelles Feedback</p>
                    <button class="back-button" onclick="backToModeSelection()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5"></path>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        Zur√ºck zur Auswahl
                    </button>
                </div>
                
                <div class="upload-area">
                    <div class="drag-drop-zone" id="dragDropZone">
                        <div class="upload-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                        </div>
                        <h3>Datei hier ablegen oder klicken</h3>
                        <p>Unterst√ºtzte Formate: PDF, DOC, DOCX, TXT</p>
                        <p class="file-size">Max. Dateigr√∂√üe: 10 MB</p>
                        <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.txt" style="display: none;">
                        <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                            Datei ausw√§hlen
                        </button>
                    </div>
                    
                    <div class="uploaded-files" id="uploadedFiles" style="display: none;">
                        <h3>Hochgeladene Dateien</h3>
                        <div class="file-list" id="fileList">
                            <!-- Uploaded files will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Businessplan Editor -->
            <div class="businessplan-editor" id="businessplanEditor" style="display: none;">
                <div class="editor-sidebar">
                    <div class="sidebar-header">
                        <h3>Businessplan Struktur</h3>
                        <button class="back-button" onclick="backToTemplateSelection()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 12H5"></path>
                                <polyline points="12 19 5 12 12 5"></polyline>
                            </svg>
                            Neue Vorlage
                        </button>
                    </div>
                    
                    <div class="chapter-nav" id="chapterNav">
                        <!-- Navigation will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="editor-content">
                    <div class="editor-header">
                        <h2 id="currentChapterTitle">Kapitel laden...</h2>
                        <div class="editor-actions">
                            <button class="btn btn-secondary" onclick="saveProgress()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                </svg>
                                Speichern
                            </button>
                            <button class="btn btn-secondary" onclick="exportBusinessplan()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                Exportieren
                            </button>
                        </div>
                    </div>
                    
                    <div class="editor-body">
                        <div class="chapter-content" id="chapterContent">
                            <!-- Chapter content will be populated by JavaScript -->
                        </div>
                        
                        <div class="chapter-navigation">
                            <button class="btn btn-secondary" onclick="previousChapter()" id="prevChapterBtn" disabled>
                                ‚Üê Vorheriges Kapitel
                            </button>
                            <button class="btn btn-primary" onclick="nextChapter()" id="nextChapterBtn">
                                N√§chstes Kapitel ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Send to Advisor Modal -->
    <div class="modal" id="advisorModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Businessplan an Berater senden</h2>
                <button class="modal-close" onclick="closeAdvisorModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="advisor-summary">
                    <h3>Zusammenfassung</h3>
                    <div class="summary-stats">
                        <div class="stat">
                            <span class="stat-label">Vollst√§ndigkeit:</span>
                            <span class="stat-value" id="completionStatus">0%</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Vorlage:</span>
                            <span class="stat-value" id="templateType">-</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">W√∂rter:</span>
                            <span class="stat-value" id="wordCount">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="advisor-message">
                    <h3>Nachricht an den Berater (optional)</h3>
                    <textarea 
                        id="advisorMessage" 
                        placeholder="Beschreibe spezielle Fragen oder Bereiche, auf die der Berater achten soll..."
                        rows="4"
                    ></textarea>
                </div>
                
                <div class="advisor-options">
                    <h3>Feedback-Optionen</h3>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" id="generalFeedback" checked>
                            <span>Allgemeine Bewertung</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="financialReview">
                            <span>Finanzplan-Pr√ºfung</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="marketAnalysis">
                            <span>Marktanalyse-Feedback</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="competitorCheck">
                            <span>Wettbewerbsanalyse</span>
                        </label>
                    </div>
                </div>
                
                <div class="advisor-info">
                    <div class="info-box">
                        <h4>Was passiert als n√§chstes?</h4>
                        <ul>
                            <li>Dein Businessplan wird an einen Fachberater weitergeleitet</li>
                            <li>Du erh√§ltst innerhalb von 3-5 Werktagen detailliertes Feedback</li>
                            <li>Das Feedback wird in deinem Dashboard angezeigt</li>
                            <li>Bei Bedarf kann ein Beratungstermin vereinbart werden</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAdvisorModal()">Abbrechen</button>
                <button class="btn btn-primary" onclick="confirmSendToAdvisor()">Businessplan senden</button>
            </div>
        </div>
    </div>

    <!-- Template Preview Modal -->
    <div class="modal" id="templatePreviewModal" style="display: none;">
        <div class="modal-content template-preview-modal">
            <div class="modal-header">
                <h2 id="previewTemplateTitle">Template Vorschau</h2>
                <button class="modal-close" onclick="closeTemplatePreview()">√ó</button>
            </div>
            
            <div class="template-preview-header">
                <div class="preview-template-info">
                    <div class="preview-template-icon" id="previewTemplateIcon">üöÄ</div>
                    <div class="preview-template-details">
                        <h3 id="previewTemplateName">Startup / Tech</h3>
                        <p id="previewTemplateDescription">F√ºr innovative Startups und Technologieunternehmen</p>
                        <div class="preview-template-stats">
                            <span class="stat">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14,2 14,8 20,8"></polyline>
                                </svg>
                                <span id="previewChapterCount">8 Kapitel</span>
                            </span>
                            <span class="stat">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                <span id="previewEstimatedTime">2-3 Stunden</span>
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="preview-template-actions">
                    <button class="btn btn-primary" onclick="selectTemplateFromPreview()" id="selectFromPreviewBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        Diese Vorlage verwenden
                    </button>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="template-preview-container">
                    <div class="preview-chapters" id="previewChapters">
                        <!-- Chapters will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/loading-states.js"></script>
    <script src="js/businessplan-templates.js"></script>
    <script src="js/businessplan-creator.js"></script>
    <script src="js/mobile-navigation.js"></script>
    <script src="js/error-handling.js"></script>
    <script src="js/file-upload.js"></script>
    <script src="js/pdf-export.js"></script>
    <script src="js/tooltips.js"></script>
</body>
</html>